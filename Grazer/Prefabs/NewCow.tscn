[gd_scene load_steps=44 format=3 uid="uid://7yj3pi4bmb25"]

[ext_resource type="Script" path="res://Scripts/Cow.gd" id="1_io0ac"]
[ext_resource type="Material" uid="uid://bn48khbwm281y" path="res://Assets/Models/Cow/cowT.tres" id="2_aprpk"]
[ext_resource type="PackedScene" uid="uid://dm7aquke2ufaa" path="res://Assets/Models/Cow/grazer_cow.tscn" id="2_ijoet"]
[ext_resource type="Material" uid="uid://bpklw4u7vb50" path="res://Assets/Materials/Silhouette.tres" id="2_pof8t"]
[ext_resource type="Shader" path="res://Assets/Materials/Marauder.gdshader" id="3_85vou"]
[ext_resource type="Texture2D" uid="uid://d8o0jysbgt8a" path="res://Assets/Images/mooIndicator.png" id="5_s17sp"]
[ext_resource type="Texture2D" uid="uid://crpwaftyuqtwo" path="res://Assets/Images/hud/OneDrive_1_4-12-2023/cowOffscreen/cowHead.png" id="6_2ydcx"]

[sub_resource type="BoxShape3D" id="1"]
size = Vector3(0.5, 1.8, 1.4)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_occvk"]

[sub_resource type="BoxShape3D" id="BoxShape3D_n7sqo"]
size = Vector3(0.5, 1, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_j2bi5"]
resource_local_to_scene = true
render_priority = 2
next_pass = ExtResource("2_pof8t")
shader = ExtResource("3_85vou")
shader_parameter/amount = 0.0
shader_parameter/color = Color(1, 0, 0, 1)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0rl5i"]
animation = &"MDevDeath"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_7b3oy"]

[sub_resource type="AnimationNodeTimeSeek" id="AnimationNodeTimeSeek_77fbx"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_vi5kw"]
graph_offset = Vector2(-560.462, 94.6985)
nodes/Animation/node = SubResource("AnimationNodeAnimation_0rl5i")
nodes/Animation/position = Vector2(-219.615, 83.853)
nodes/DeathTime/node = SubResource("AnimationNodeTimeScale_7b3oy")
nodes/DeathTime/position = Vector2(220, 140)
nodes/DeathTimeSeek/node = SubResource("AnimationNodeTimeSeek_77fbx")
nodes/DeathTimeSeek/position = Vector2(20, 140)
nodes/output/position = Vector2(400, 140)
node_connections = [&"output", 0, &"DeathTime", &"DeathTime", 0, &"DeathTimeSeek", &"DeathTimeSeek", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_apq8k"]
animation = &"MDevIdle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_r4h1w"]
filter_enabled = true
filters = ["CowBones/Skeleton3D:EarBase_l", "CowBones/Skeleton3D:EarBase_r", "CowBones/Skeleton3D:EarEnd_l", "CowBones/Skeleton3D:EarEnd_r", "CowBones/Skeleton3D:EarLower_l", "CowBones/Skeleton3D:EarLower_r", "CowBones/Skeleton3D:Ear_Upper_l", "CowBones/Skeleton3D:Ear_Upper_r", "CowBones/Skeleton3D:TailEnd", "CowBones/Skeleton3D:Tail_1", "CowBones/Skeleton3D:Tail_2", "CowBones/Skeleton3D:Tail_3"]

[sub_resource type="AnimationNodeBlend3" id="AnimationNodeBlend3_64ihx"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_aufrp"]
animation = &"MDevIdle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lsaqr"]
animation = &"MDevIdle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0i6pq"]
animation = &"MDevRun"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_1jfs6"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_470m5"]
animation = &"MDevWalk"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_lbtcq"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_73syc"]
graph_offset = Vector2(-232.844, 223.578)
nodes/Animation/node = SubResource("AnimationNodeAnimation_apq8k")
nodes/Animation/position = Vector2(300, 400)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_r4h1w")
nodes/Blend2/position = Vector2(540, 140)
nodes/BlendMove/node = SubResource("AnimationNodeBlend3_64ihx")
nodes/BlendMove/position = Vector2(300, 200)
nodes/Graze/node = SubResource("AnimationNodeAnimation_aufrp")
nodes/Graze/position = Vector2(-480, 200)
nodes/Idle/node = SubResource("AnimationNodeAnimation_lsaqr")
nodes/Idle/position = Vector2(-360, 40)
nodes/Run/node = SubResource("AnimationNodeAnimation_0i6pq")
nodes/Run/position = Vector2(-120, 380)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_1jfs6")
nodes/TimeScale/position = Vector2(140, 340)
nodes/Walk/node = SubResource("AnimationNodeAnimation_470m5")
nodes/Walk/position = Vector2(-120, 260)
nodes/idleBlend/node = SubResource("AnimationNodeBlend2_lbtcq")
nodes/idleBlend/position = Vector2(-40, 40)
nodes/output/position = Vector2(740, 140)
node_connections = [&"output", 0, &"Blend2", &"Blend2", 0, &"BlendMove", &"Blend2", 1, &"Animation", &"BlendMove", 0, &"idleBlend", &"BlendMove", 1, &"Walk", &"BlendMove", 2, &"TimeScale", &"TimeScale", 0, &"Run", &"idleBlend", 0, &"Idle", &"idleBlend", 1, &"Graze"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gdrr1"]
animation = &"cowDeath30fps(1-48)"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_s87oc"]
animation = &"cowDrag30fps(1-24)"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_35lm5"]
animation = &"cowGraze30fps(1-120)Loop(37-75)"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_r8ojf"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1hh5i"]
xfade_time = 0.1
advance_mode = 2
advance_condition = &"Drag"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hdqkk"]
xfade_time = 1.0
advance_mode = 2
advance_condition = &"Graze"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uf78v"]
xfade_time = 1.0
switch_mode = 2
advance_mode = 2
advance_condition = &"Not_Graze"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ll7nr"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6y67t"]
advance_mode = 2
advance_condition = &"Not_Drag"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jmkb4"]
advance_mode = 2
advance_condition = &"Death"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_n7440"]
xfade_time = 0.5
advance_mode = 2
advance_condition = &"NotDead"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_uc5yq"]
states/Death/node = SubResource("AnimationNodeBlendTree_vi5kw")
states/Death/position = Vector2(430, 175)
states/End/position = Vector2(652, 166)
states/Movement/node = SubResource("AnimationNodeBlendTree_73syc")
states/Movement/position = Vector2(430, 68)
states/Start/position = Vector2(190, 68)
states/cowDeath30fps(1-48)/node = SubResource("AnimationNodeAnimation_gdrr1")
states/cowDeath30fps(1-48)/position = Vector2(430, 256)
states/cowDrag30fps(1-24)/node = SubResource("AnimationNodeAnimation_s87oc")
states/cowDrag30fps(1-24)/position = Vector2(213, 143)
states/cowGraze30fps(1-120)Loop(37-75)/node = SubResource("AnimationNodeAnimation_35lm5")
states/cowGraze30fps(1-120)Loop(37-75)/position = Vector2(692, 68)
transitions = ["Start", "Movement", SubResource("AnimationNodeStateMachineTransition_r8ojf"), "Movement", "cowDrag30fps(1-24)", SubResource("AnimationNodeStateMachineTransition_1hh5i"), "Movement", "cowGraze30fps(1-120)Loop(37-75)", SubResource("AnimationNodeStateMachineTransition_hdqkk"), "cowGraze30fps(1-120)Loop(37-75)", "Movement", SubResource("AnimationNodeStateMachineTransition_uf78v"), "cowDeath30fps(1-48)", "End", SubResource("AnimationNodeStateMachineTransition_ll7nr"), "cowDrag30fps(1-24)", "Movement", SubResource("AnimationNodeStateMachineTransition_6y67t"), "Movement", "Death", SubResource("AnimationNodeStateMachineTransition_jmkb4"), "Death", "Movement", SubResource("AnimationNodeStateMachineTransition_n7440")]
graph_offset = Vector2(-159, 17.4034)

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_k6su5"]

[sub_resource type="PrismMesh" id="2"]

[sub_resource type="QuadMesh" id="QuadMesh_58ldv"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_d3pba"]
render_priority = 3
transparency = 1
no_depth_test = true
shading_mode = 0
albedo_color = Color(1, 0, 0, 1)
albedo_texture = ExtResource("5_s17sp")
disable_receive_shadows = true
billboard_mode = 1
billboard_keep_scale = true
grow = true
grow_amount = 5.0
fixed_size = true
point_size = 128.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_vo1q1"]
render_priority = 10
transparency = 1
no_depth_test = true
shading_mode = 0
albedo_texture = ExtResource("6_2ydcx")
disable_receive_shadows = true
billboard_mode = 1
billboard_keep_scale = true
grow = true
grow_amount = 5.0
fixed_size = true
point_size = 128.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_n6k6m"]
render_priority = 5
transparency = 1
no_depth_test = true
shading_mode = 0
albedo_color = Color(0, 0, 0, 1)
albedo_texture = ExtResource("6_2ydcx")
disable_receive_shadows = true
billboard_mode = 1
billboard_keep_scale = true
grow = true
grow_amount = 5.0
fixed_size = true
point_size = 128.0

[node name="Cow" type="CharacterBody3D"]
collision_layer = 8
script = ExtResource("1_io0ac")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.3, 0, 0, 0, 1.3, 0, 0, 0, 1.3, 0, 1.2, 0)
shape = SubResource("1")
disabled = true

[node name="TopCollider" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 1.5, 0)
shape = SubResource("CapsuleShape3D_occvk")

[node name="BottomCollider" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0.5, 0)
shape = SubResource("BoxShape3D_n7sqo")

[node name="Model" parent="." instance=ExtResource("2_ijoet")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.25)

[node name="CowBones" parent="Model" index="0"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="Model/CowBones" index="0"]
bones/1/position = Vector3(-0.300835, 0.935758, 1.32501e-07)
bones/1/rotation = Quaternion(-4.45756e-08, -3.71855e-08, 0.321028, 0.94707)
bones/2/rotation = Quaternion(1.37614e-07, 2.35782e-09, 0.927243, -0.37446)
bones/3/rotation = Quaternion(0.0389295, -0.121027, 0.303725, 0.94424)
bones/4/rotation = Quaternion(-0.0501563, 0.116822, -0.391315, 0.911433)
bones/5/rotation = Quaternion(2.6476e-08, 1.0912e-07, 0.10627, 0.994337)
bones/6/rotation = Quaternion(1.37001e-08, 1.26184e-09, -0.060819, 0.998149)
bones/8/rotation = Quaternion(0.0707216, -0.0953491, -0.149995, 0.981534)
bones/8/scale = Vector3(1, 1.00011, 1)
bones/9/rotation = Quaternion(0.0291477, 0.00942958, -0.190909, 0.98113)
bones/9/scale = Vector3(1, 0.999275, 1)
bones/11/rotation = Quaternion(0.0782145, 0.0963758, 0.15084, 0.980735)
bones/11/scale = Vector3(1, 1.00188, 1)
bones/12/rotation = Quaternion(0.0386092, -0.0076948, 0.193953, 0.980221)
bones/12/scale = Vector3(1, 0.999086, 1)
bones/13/rotation = Quaternion(-4.28114e-07, -1.50052e-07, -0.759669, 0.65031)
bones/14/rotation = Quaternion(5.81336e-08, 1.66402e-07, -0.0390167, 0.999239)
bones/14/scale = Vector3(1, 1.00193, 1)
bones/15/rotation = Quaternion(0.066159, -0.297519, -0.658092, 0.688492)
bones/16/rotation = Quaternion(-0.499937, 0.11422, -0.275771, 0.812999)
bones/17/rotation = Quaternion(0.0910914, -0.0283789, 0.147255, 0.984486)
bones/18/rotation = Quaternion(0.000582999, -0.0270856, -0.000758543, 0.999633)
bones/18/scale = Vector3(1.05183, 1.05183, 1.05183)
bones/19/rotation = Quaternion(0.0211934, 0.0254313, -0.0849064, 0.995839)
bones/20/rotation = Quaternion(0.620132, 0.5912, -0.229994, -0.461543)
bones/21/rotation = Quaternion(-0.499937, -0.11422, 0.275771, 0.812999)
bones/22/rotation = Quaternion(0.0802714, -0.0426564, -0.153464, 0.983964)
bones/23/rotation = Quaternion(0.000583049, 0.0270855, 0.000758599, 0.999633)
bones/23/scale = Vector3(1.05183, 1.05183, 1.05183)
bones/24/rotation = Quaternion(0.0272959, 0.0464085, 0.0831329, 0.995083)
bones/26/rotation = Quaternion(7.50011e-05, 2.82648e-05, 0.353646, 0.935379)
bones/26/scale = Vector3(1, 1.00155, 1)
bones/27/rotation = Quaternion(-3.83648e-05, -3.27736e-06, 0.105111, 0.994461)
bones/27/scale = Vector3(1, 1.0001, 1)
bones/28/rotation = Quaternion(-0.000465729, 1.95908e-05, -0.0421772, 0.99911)
bones/28/scale = Vector3(1, 1.00038, 1)
bones/29/rotation = Quaternion(-0.000489901, 2.43671e-05, -0.0424206, 0.9991)
bones/29/scale = Vector3(1, 1.00018, 1)
bones/30/rotation = Quaternion(0.763089, 0.214371, 0.149865, 0.591)
bones/31/rotation = Quaternion(-0.657698, 0.709444, 0.209261, -0.142589)
bones/32/rotation = Quaternion(0.36329, 0.121775, -0.268349, 0.883844)
bones/33/rotation = Quaternion(-0.374772, 0.0140845, 0.307042, 0.874685)
bones/33/scale = Vector3(0.99366, 0.99366, 0.99366)
bones/34/rotation = Quaternion(0.0661372, 0.994805, 0.0463131, -0.0620052)
bones/35/rotation = Quaternion(0.145175, -0.584725, 0.767763, -0.218084)
bones/36/rotation = Quaternion(0.656422, 0.709582, 0.211359, 0.144673)
bones/37/rotation = Quaternion(0.369868, -0.107311, 0.26842, 0.882968)
bones/38/rotation = Quaternion(-0.370589, -0.0141324, -0.303615, 0.877657)
bones/38/scale = Vector3(0.993913, 0.993913, 0.993913)
bones/39/rotation = Quaternion(-0.0649656, 0.992735, 0.0314223, -0.0962829)
bones/40/position = Vector3(1.76197, 1.02472, 7.14447e-08)
bones/40/rotation = Quaternion(-4.95383e-08, -6.65468e-09, -0.78872, 0.614752)
bones/41/position = Vector3(1.02516, 0.353175, 0.141532)
bones/42/position = Vector3(1.02516, 0.353175, -0.141532)
bones/45/position = Vector3(0.778273, 0.128276, 0.182032)
bones/45/rotation = Quaternion(0.0286953, 1.19209e-07, -0.999588, 1.78814e-07)
bones/46/position = Vector3(0.778273, 0.128276, -0.182032)
bones/46/rotation = Quaternion(0.999588, 8.9407e-08, -0.0286953, 2.98023e-08)
bones/47/position = Vector3(-0.485345, 0.110661, 0.193701)
bones/47/rotation = Quaternion(-0.707107, -1.49012e-08, -0.707107, -1.63913e-07)
bones/48/position = Vector3(-0.485345, 0.110661, -0.193701)
bones/48/rotation = Quaternion(-0.566117, 7.45058e-08, -0.824325, 2.98023e-08)

[node name="Cow" parent="Model/CowBones/Skeleton3D" index="0"]
material_override = SubResource("ShaderMaterial_j2bi5")
material_overlay = ExtResource("2_aprpk")

[node name="AnimationTree" type="AnimationTree" parent="Model"]
tree_root = SubResource("AnimationNodeStateMachine_uc5yq")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/playback = SubResource("AnimationNodeStateMachinePlayback_k6su5")
parameters/conditions/Death = false
parameters/conditions/Drag = false
parameters/conditions/Graze = false
parameters/conditions/NotDead = false
parameters/conditions/Not_Drag = false
parameters/conditions/Not_Graze = false
parameters/Death/DeathTime/scale = 1.0
parameters/Death/DeathTimeSeek/seek_request = -1.0
parameters/Movement/Blend2/blend_amount = 0.0
parameters/Movement/BlendMove/blend_amount = -1.0
parameters/Movement/TimeScale/scale = 1.0
parameters/Movement/idleBlend/blend_amount = 0.0

[node name="RayCastLeft" type="RayCast3D" parent="."]
transform = Transform3D(0.707106, 0, 0.707107, 0, 0.999999, 0, -0.707106, 0, 0.707107, 0, 0.9, -0.5)
target_position = Vector3(0, 0, -2)
collision_mask = 22

[node name="MeshInstance3D" type="MeshInstance3D" parent="RayCastLeft"]
transform = Transform3D(0.1, 0, 0, 0, -8.74228e-08, 0.1, 0, -2, -4.37114e-09, 0, 0, -1)
visible = false
mesh = SubResource("2")

[node name="RayCastMiddle" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, -0.5)
target_position = Vector3(0, 0, -1)
collision_mask = 22

[node name="MeshInstance3D" type="MeshInstance3D" parent="RayCastMiddle"]
transform = Transform3D(0.1, 0, 0, 0, -4.37114e-08, 0.1, 0, -1, -4.37114e-09, 0, 0, -0.5)
visible = false
mesh = SubResource("2")

[node name="RayCastRight" type="RayCast3D" parent="."]
transform = Transform3D(0.707106, 0, -0.707107, 0, 0.999999, 0, 0.707106, 0, 0.707107, 0, 0.9, -0.5)
target_position = Vector3(0, 0, -2)
collision_mask = 22

[node name="MeshInstance3D" type="MeshInstance3D" parent="RayCastRight"]
transform = Transform3D(0.1, 0, 0, 0, -8.74228e-08, 0.1, 0, -2, -4.37114e-09, 0, 0, -1)
visible = false
mesh = SubResource("2")

[node name="NavigationObstacle3D" type="NavigationObstacle3D" parent="."]

[node name="walking" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0896186, 0.422988)
bus = &"SoundFXMain"

[node name="moo" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.38526, -0.906972)
volume_db = -14.0
bus = &"Voices"

[node name="OffscreenIndicator" type="Node3D" parent="."]

[node name="MooIndicator" type="MeshInstance3D" parent="OffscreenIndicator"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 1, 0)
visible = false
sorting_offset = 10.0
mesh = SubResource("QuadMesh_58ldv")
surface_material_override/0 = SubResource("StandardMaterial3D_d3pba")

[node name="StealIndicator" type="MeshInstance3D" parent="OffscreenIndicator"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 1, 0)
visible = false
sorting_offset = 10.0
mesh = SubResource("QuadMesh_58ldv")
surface_material_override/0 = SubResource("StandardMaterial3D_vo1q1")

[node name="BackGradient" type="MeshInstance3D" parent="OffscreenIndicator/StealIndicator"]
sorting_offset = 10.0
mesh = SubResource("QuadMesh_58ldv")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_n6k6m")

[editable path="Model"]
